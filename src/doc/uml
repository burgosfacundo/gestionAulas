@startuml
interface CrudOperations<T> {
    +void crear(T objeto)
    +T leer(int id)
    +void actualizar(T objeto)
    +void eliminar(int id)
    +List<T> listar()
}

enum BloqueHorario {
    MANIANA_PRIMER_BLOQUE,
    MANIANA_SEGUNDO_BLOQUE,
    TARDE_PRIMER_BLOQUE,
    TARDE_SEGUNDO_BLOQUE,
    NOCHE_PRIMER_BLOQUE,
    NOCHE_SEGUNDO_BLOQUE
}

class Aula {
    int numero
    int capacidad
    boolean tieneProyector
    boolean tieneTV
}


class Laboratorio extends Aula {
    int computadoras
}

class Reserva {
    LocalDate fechaInicio
    LocalDate fechaFin
    BloqueHorario bloque
    Aula aula
    Inscripcion inscripcion  // Relación directa con Inscripción
}

class Profesor {
    String nombre
    String apellido
    String matricula
}


class Asignatura {
    String nombre
    boolean requiereLaboratorio
}

class Inscripcion {
    int cantidadAlumnos
    int margenAlumnos
    LocalDate fechaFinInscripcion
    Asignatura asignatura
    String comision
    Profesor profesor
}

class GestorAula implements CrudOperations<Aula> {
    Set<Aula> aulas
    RepositorioAula repositorioAula
}

class GestorReserva implements CrudOperations<Reserva> {
    List<Reserva> reservas
    RepositorioReserva repositorioReserva
    RepositorioAsignatura repositorioAsignatura
    RepositorioInscripcion repositorioInscripcion
    RepositorioProfesor repositorioProfesor
    RepositorioAula repositorioAula
}

class RepositorioAula implements JSONRepository<Aula> {
}

class RepositorioReserva implements JSONRepository<Reserva> {
}

class RepositorioAsignatura implements JSONRepository<Asignatura> {
}

class RepositorioInscripcion implements JSONRepository<Inscripcion> {
}

class RepositorioProfesor implements JSONRepository<Profesor> {
}

class RepositorioUsuario implements JSONRepository<Usuario> {
}

class RepositorioRol implements JSONRepository<Rol> {
}

class Seguridad {
    Usuario autenticar(String username, String password)
    boolean tienePermiso(Usuario usuario, String accion)
}

class Menu {
    MenuAdministrador menuAdmin
    MenuProfesor menuProfesor
    Seguridad seguridad
}


class MenuAdministrador {
    GestorAula gestorAula
    GestorReserva gestorReserva
}

class MenuProfesor {
    GestorReserva gestorReserva
}

class Usuario {
    String username
    String password
    Rol rol
}

class Rol{
    int id
    String nombre
    String descripcion
    Set<String> permisos;
}


Reserva o-- Aula
Reserva o-- Inscripcion
Reserva *-- BloqueHorario
Inscripcion o-- Asignatura
Inscripcion -- Profesor
Menu o-- Seguridad
Menu o-- MenuAdministrador
Menu o-- MenuProfesor
@enduml
